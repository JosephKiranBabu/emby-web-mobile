define(["scripts/livetvcomponents","emby-button","emby-itemscontainer"],function(){function renderActiveRecordings(context){ApiClient.getLiveTvTimers({IsActive:!0}).then(function(result){result.Items.length&&"InProgress"!=result.Items[0].Status&&(result.Items=[]),renderTimers(context.querySelector("#activeRecordings"),result.Items,{indexByDate:!1})})}function renderTimers(context,timers,options){LiveTvHelpers.getTimersHtml(timers,options).then(function(html){var elem=context;html?elem.classList.remove("hide"):elem.classList.add("hide"),elem.querySelector(".recordingItems").innerHTML=html,ImageLoader.lazyChildren(elem)})}function renderUpcomingRecordings(context){ApiClient.getLiveTvTimers({IsActive:!1}).then(function(result){renderTimers(context.querySelector("#upcomingRecordings"),result.Items),Dashboard.hideLoadingMsg()})}function reload(context){Dashboard.showLoadingMsg(),renderActiveRecordings(context),renderUpcomingRecordings(context)}return function(view,params,tabContent){var self=this;tabContent.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",function(){reload(tabContent)}),self.renderTab=function(){reload(tabContent)}}});